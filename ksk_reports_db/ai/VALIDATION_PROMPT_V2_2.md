# VALIDATION_PROMPT_KSK_V2.2: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ Schema Reference

**–í–µ—Ä—Å–∏—è:** 2.2 FINAL  
**–î–∞—Ç–∞:** 31.10.2025 01:43 MSK  
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û ‚Äî –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û–ï –í–´–ü–û–õ–ù–ï–ù–ò–ï  
**–û–±–ª–∞—Å—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:** –í–°–ï –≤–æ–ø—Ä–æ—Å—ã –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ –ö–°–ö, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –∫–æ–¥–æ–º, –ë–î, —Ñ—É–Ω–∫—Ü–∏—è–º–∏, –º–∏–≥—Ä–∞—Ü–∏—è–º–∏

---

## üö® –ì–õ–ê–í–ù–û–ï –ü–†–ê–í–ò–õ–û: ZERO-TOLERANCE POLICY

**–ü—Ä–∏ –õ–Æ–ë–û–ú –¥–µ–π—Å—Ç–≤–∏–∏ —Å –∫–æ–¥–æ–º (—Å–æ–∑–¥–∞–Ω–∏–µ, –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è, –æ–±—Å—É–∂–¥–µ–Ω–∏–µ, –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ) —Ç—ã –û–ë–Ø–ó–ê–ù:**

1. **–ó–ê–ì–†–£–ó–ò–¢–¨** —Ñ–∞–π–ª **KSK-Schema-Reference-v3.7.md** –∏–∑ —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
2. **–°–í–ï–†–ò–¢–¨** –í–°–ï –æ–±—ä–µ–∫—Ç—ã –ë–î —Å —ç—Ç–∞–ª–æ–Ω–Ω—ã–º–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è–º–∏
3. **–í–´–Ø–í–ò–¢–¨** –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è (–µ—Å–ª–∏ –µ—Å—Ç—å)
4. **–ë–õ–û–ö–ò–†–û–í–ê–¢–¨** –ª—é–±–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π
5. **–ó–ê–ü–†–û–°–ò–¢–¨** —É—Ç–æ—á–Ω–µ–Ω–∏–µ —É –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –ü–ï–†–ï–î –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ–º

**‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û:** –ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–µ = –°–¢–û–ü! –ù–∏–∫–∞–∫–∏—Ö "–≤–µ—Ä–æ—è—Ç–Ω–æ", "–º–æ–∂–µ—Ç –±—ã—Ç—å", "–ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞—é".

---

## üìã –ê–õ–ì–û–†–ò–¢–ú –í–ê–õ–ò–î–ê–¶–ò–ò (5 –®–ê–ì–û–í)

### –®–ê–ì 1: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –∑–∞–ø—Ä–æ—Å–µ

–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–∞, —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ —Å –ö–°–ö, –æ–ø—Ä–µ–¥–µ–ª–∏ –í–°–ï –æ–±—ä–µ–∫—Ç—ã –ë–î:

**–¢–∏–ø—ã –æ–±—ä–µ–∫—Ç–æ–≤:**
- **–¢–∞–±–ª–∏—Ü—ã:** ksk_result, ksk_figurant, ksk_figurant_match, ksk_report_*, –∏ —Ç.–¥.
- **–ü–æ–ª—è:** payment_type, resolution, has_bypass, is_bypass, list_codes, output_timestamp, timestamp, –∏ —Ç.–¥.
- **–ü–µ—Ä–µ—á–∏—Å–ª—è–µ–º—ã–µ —Ç–∏–ø—ã:** I/O/T/M/V, allow/review/deny/empty, yes/no, yes/no/empty
- **–§—É–Ω–∫—Ü–∏–∏:** ksk_run_report(), put_ksk_result(), ksk_report_review(), check_*, –∏ —Ç.–¥.
- **–¢–∏–ø—ã –æ—Ç—á—ë—Ç–æ–≤:** totals, list_totals, figurants, totals_by_payment_type, list_totals_by_payment_type
- **CRON –∑–∞–¥–∞—á–∏:** pg_cron —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
- **–ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ø–µ—Ä–∏–æ–¥ (1 –¥–µ–Ω—å), –≥—Ä–∞–Ω–∏—Ü—ã (FROM ... TO ...)

**–ü—Ä–∏–º–µ—Ä –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:**
```
–í–æ–ø—Ä–æ—Å: "–°–æ–∑–¥–∞–π —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –æ—Ç—á—ë—Ç–∞ –ø–æ —Ç—Ä–∞–Ω–∑–∏—Ç–Ω—ã–º –ø–ª–∞—Ç–µ–∂–∞–º –∑–∞ 22 –æ–∫—Ç—è–±—Ä—è"
–û–±—ä–µ–∫—Ç—ã:
- ksk_result.payment_type (–ø–æ–ª–µ)
- payment_type='T' (–∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è)
- ksk_run_report() (—Ñ—É–Ω–∫—Ü–∏—è)
- ksk_report_orchestrator (—Ç–∞–±–ª–∏—Ü–∞)
- –ü–∞—Ä—Ç–∏—Ü–∏—è: ksk_result_2025_10_22 (FROM '2025-10-22 00:00:00' TO '2025-10-23 00:00:00')
```

---

### –®–ê–ì 2: –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ v3.7

**–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –≤—ã–∑–≤–∞—Ç—å:**
```
search_files_v2:
  queries: [
    "PARTITION BY RANGE output_timestamp timestamp 1 –¥–µ–Ω—å FROM TO",
    "payment_type I O T M V",
    "has_bypass is_bypass",
    "ksk_run_report parameters",
    "ksk_report_review figurants"
  ]
  file_ids: ["<UUID —Ñ–∞–π–ª–∞ KSK-Schema-Reference-v3.7.md>"]
  retrieval_mode: "READ"
  context_budget: "LONG"
```

**‚ö†Ô∏è –ï—Å–ª–∏ —Ñ–∞–π–ª KSK-Schema-Reference-v3.7.md –Ω–µ –Ω–∞–π–¥–µ–Ω:**
1. –ü–æ–∏—Å–∫–∞—Ç—å KSK-Schema-Reference-v3.*.md (–ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è)
2. –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ ‚Äî –ë–õ–û–ö–ò–†–û–í–ê–¢–¨ –¥–µ–π—Å—Ç–≤–∏–µ, –∑–∞–ø—Ä–æ—Å–∏—Ç—å —É –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –ø—É—Ç—å –∫ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫—É

---

### –®–ê–ì 3: –°–≤–µ—Ä–∫–∞ —Å —ç—Ç–∞–ª–æ–Ω–æ–º (17 –ø—Ä–æ–≤–µ—Ä–æ–∫)

–î–ª—è –ö–ê–ñ–î–û–ì–û –æ–±—ä–µ–∫—Ç–∞ –≤—ã–ø–æ–ª–Ω–∏ –í–°–ï –ø—Ä–æ–≤–µ—Ä–∫–∏:

| ‚Ññ | –ü—Ä–æ–≤–µ—Ä–∫–∞ | –ß—Ç–æ —Å–≤–µ—Ä—è—Ç—å | –ü—Ä–∏–º–µ—Ä –û–®–ò–ë–ö–ò |
|---|----------|-------------|---------------|
| 1 | –ò–º—è –æ–±—ä–µ–∫—Ç–∞ | –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ (—Ä–µ–≥–∏—Å—Ç—Ä!) | ksk_Result ‚ùå ‚Üí ksk_result ‚úÖ |
| 2 | –¢–∏–ø –ø–æ–ª—è | VARCHAR(20) vs VARCHAR(10) | payment_type VARCHAR(30) ‚ùå ‚Üí VARCHAR(20) ‚úÖ |
| 3 | –ó–Ω–∞—á–µ–Ω–∏—è enum | I/O/T/M/V (—Ç–æ–ª—å–∫–æ 5!) | payment_type='W' ‚ùå ‚Üí payment_type='T' ‚úÖ |
| 4 | –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ enum | "–¢—Ä–∞–Ω–∑–∏—Ç–Ω—ã–π", –Ω–µ "—Ç—Ä–∞–Ω–∑–∏—Ç" | "—Ç—Ä–∞–Ω–∑–∏—Ç" ‚ùå ‚Üí "–¢—Ä–∞–Ω–∑–∏—Ç–Ω—ã–π" ‚úÖ |
| 5 | Default –∑–Ω–∞—á–µ–Ω–∏—è | 'empty' vs 'no' | has_bypass DEFAULT 'no' ‚ùå ‚Üí 'empty' ‚úÖ |
| 6 | NULL/NOT NULL | NOT NULL vs NULL | payment_type NULL ‚ùå ‚Üí NOT NULL ‚úÖ |
| 7 | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ | 6 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ ksk_run_report | 5 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ ‚ùå ‚Üí 6 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ ‚úÖ |
| 8 | –¢–∏–ø—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ | DATE vs TIMESTAMP | p_start_date TIMESTAMP ‚ùå ‚Üí DATE ‚úÖ |
| 9 | –ü–æ—Ä—è–¥–æ–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ | p_report_code, p_initiator, ... | –ù–µ–≤–µ—Ä–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ ‚ùå ‚Üí –í–µ—Ä–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ ‚úÖ |
| 10 | –¢–∏–ø –≤–æ–∑–≤—Ä–∞—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–∏ | INTEGER vs VOID | ksk_run_report() VOID ‚ùå ‚Üí INTEGER ‚úÖ |
| 11 | –ù–∞–∑–≤–∞–Ω–∏—è –∫–æ–ª–æ–Ω–æ–∫ –æ—Ç—á—ë—Ç–æ–≤ | total_allow vs allow_total | allow_total ‚ùå ‚Üí total_allow ‚úÖ |
| 12 | –°—Ç—Ä—É–∫—Ç—É—Ä–∞ JSONB | searchCheckResultKCKH | searchCheckResult ‚ùå ‚Üí searchCheckResultKCKH ‚úÖ |
| 13 | –ò–º–µ–Ω–∞ –∏–Ω–¥–µ–∫—Å–æ–≤ | idx_ksk_result_corr_id | idx_result_corr_id ‚ùå ‚Üí idx_ksk_result_corr_id ‚úÖ |
| 14 | –¢–∏–ø—ã –∏–Ω–¥–µ–∫—Å–æ–≤ | B-tree vs GIN | list_codes B-tree ‚ùå ‚Üí GIN ‚úÖ |
| 15 | FK —Å–≤—è–∑–∏ | CASCADE DELETE vs NO ACTION | NO ACTION ‚ùå ‚Üí CASCADE DELETE ‚úÖ |
| 16 | CHECK constraints | status IN ('success', 'error') | status IN ('ok', 'fail') ‚ùå ‚Üí ('success', 'error') ‚úÖ |
| **17** | **–ü–ê–†–¢–ò–¶–ò–û–ù–ò–†–û–í–ê–ù–ò–ï** | **–ö–†–ò–¢–ò–ß–ù–û!** | **–°–º. –Ω–∏–∂–µ** |

---

### ‚úÖ –ü–†–û–í–ï–†–ö–ê ‚Ññ17: –ü–ê–†–¢–ò–¶–ò–û–ù–ò–†–û–í–ê–ù–ò–ï (–ö–†–ò–¢–ò–ß–ù–û!)

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å:**

| –ê—Å–ø–µ–∫—Ç | ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û | ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û |
|--------|--------------|----------------|
| **–ö–ª—é—á –ø–∞—Ä—Ç–∏—Ü–∏–∏** | PARTITION BY RANGE (**output_timestamp**) –¥–ª—è ksk_result | PARTITION BY RANGE (date) |
| **–ö–ª—é—á –ø–∞—Ä—Ç–∏—Ü–∏–∏** | PARTITION BY RANGE (**timestamp**) –¥–ª—è ksk_figurant | PARTITION BY RANGE (date) |
| **–ö–ª—é—á –ø–∞—Ä—Ç–∏—Ü–∏–∏** | PARTITION BY RANGE (**timestamp**) –¥–ª—è ksk_figurant_match | PARTITION BY RANGE (date) |
| **–ü–µ—Ä–∏–æ–¥ –ø–∞—Ä—Ç–∏—Ü–∏–∏** | **1 –î–ï–ù–¨ (24 —á–∞—Å–∞)** | 1 –Ω–µ–¥–µ–ª—è, 1 –º–µ—Å—è—Ü, –∏ —Ç.–¥. |
| **–ì—Ä–∞–Ω–∏—Ü–∞ FROM** | FROM '2025-10-22 **00:00:00**' | FROM '2025-10-22' (–±–µ–∑ –≤—Ä–µ–º–µ–Ω–∏) |
| **–ì—Ä–∞–Ω–∏—Ü–∞ TO** | TO '2025-10-23 **00:00:00**' (—Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å!) | TO '2025-10-22 23:59:59' |
| **–≠–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ—Å—Ç—å TO** | TO ‚Äî **–≠–ö–°–ö–õ–Æ–ó–ò–í–ù–ê–Ø** –≥—Ä–∞–Ω–∏—Ü–∞ (–ù–ï –≤–∫–ª—é—á–∞–µ—Ç—Å—è!) | TO ‚Äî –∏–Ω–∫–ª—é–∑–∏–≤–Ω–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ |
| **–î–∏–∞–ø–∞–∑–æ–Ω –≤–∫–ª—é—á–µ–Ω–∏—è** | **[FROM, TO)** ‚Äî –≤–∫–ª—é—á–∞–µ—Ç FROM, –ù–ï –≤–∫–ª—é—á–∞–µ—Ç TO | [FROM, TO] –∏–ª–∏ (FROM, TO) |

**–ü—Ä–∏–º–µ—Ä –ü–†–ê–í–ò–õ–¨–ù–û–ô –ø–∞—Ä—Ç–∏—Ü–∏–∏:**
```sql
-- –ü–∞—Ä—Ç–∏—Ü–∏—è –∑–∞ 22 –æ–∫—Ç—è–±—Ä—è 2025
CREATE TABLE ksk_result_2025_10_22 PARTITION OF ksk_result
FOR VALUES FROM ('2025-10-22 00:00:00') TO ('2025-10-23 00:00:00');

-- ‚úÖ –í–∫–ª—é—á–∞–µ—Ç: 2025-10-22 00:00:00.000 ... 2025-10-22 23:59:59.999
-- ‚ùå –ù–ï –≤–∫–ª—é—á–∞–µ—Ç: 2025-10-23 00:00:00.000 –∏ –ø–æ–∑–∂–µ
```

**–ü—Ä–∏–º–µ—Ä—ã –û–®–ò–ë–û–ö:**

```sql
-- ‚ùå –û–®–ò–ë–ö–ê 1: –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ date –≤–º–µ—Å—Ç–æ timestamp
CREATE TABLE ksk_result (...) PARTITION BY RANGE (date);

-- ‚ùå –û–®–ò–ë–ö–ê 2: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã (–±–µ–∑ –≤—Ä–µ–º–µ–Ω–∏)
CREATE TABLE ksk_result_2025_10_22 PARTITION OF ksk_result
FOR VALUES FROM ('2025-10-22') TO ('2025-10-23');

-- ‚ùå –û–®–ò–ë–ö–ê 3: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ TO (23:59:59 –≤–º–µ—Å—Ç–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –¥–Ω—è)
CREATE TABLE ksk_result_2025_10_22 PARTITION OF ksk_result
FOR VALUES FROM ('2025-10-22 00:00:00') TO ('2025-10-22 23:59:59');

-- ‚ùå –û–®–ò–ë–ö–ê 4: –ü–µ—Ä–∏–æ–¥ –Ω–µ 1 –¥–µ–Ω—å (–Ω–µ–¥–µ–ª—è)
CREATE TABLE ksk_result_2025_10_22 PARTITION OF ksk_result
FOR VALUES FROM ('2025-10-22 00:00:00') TO ('2025-10-29 00:00:00');
```

**–§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–∞—Ä—Ç–∏—Ü–∏–π:**
```sql
-- –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤—ã–∑–æ–≤
SELECT * FROM ksk_create_partitions('ksk_result', 7);

-- SQL –∫–æ–º–∞–Ω–¥–∞ –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏
CREATE TABLE %I PARTITION OF %I FOR VALUES FROM (%L) TO (%L);
```

**–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ v3.7:** –†–∞–∑–¥–µ–ª 3, "–î–æ–º–µ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã", "–ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ"

---

### –®–ê–ì 4: –í—ã—è–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π

**–ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–æ –ù–ï —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ, —Å–æ–∑–¥–∞–π –°–¢–†–£–ö–¢–£–†–ò–†–û–í–ê–ù–ù–´–ô –æ—Ç—á—ë—Ç:**

```markdown
‚ö†Ô∏è –ü–†–û–í–ï–†–ö–ê –ü–û –°–ü–†–ê–í–û–ß–ù–ò–ö–£ v3.7: –û–ë–ù–ê–†–£–ñ–ï–ù–´ –ü–†–û–¢–ò–í–û–†–ï–ß–ò–Ø

‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ü–†–û–¢–ò–í–û–†–ï–ß–ò–ï ‚Ññ1
–û–±—ä–µ–∫—Ç: ksk_result ‚Äî –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- –í –∑–∞–ø—Ä–æ—Å–µ/–∫–æ–¥–µ: PARTITION BY RANGE (date)
- –í —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ v3.7 (—Ä–∞–∑–¥–µ–ª 3, –î–æ–º–µ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã, –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ): PARTITION BY RANGE (output_timestamp)
- –¢–∏–ø –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è: –ù–µ–≤–µ—Ä–Ω—ã–π –∫–ª—é—á –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –†–∏—Å–∫: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–æ–±–ª–µ–º—ã —Å PRIMARY KEY, –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–¥–∞–ª–µ–Ω–∏—è —Å—Ç–∞—Ä—ã—Ö –ø–∞—Ä—Ç–∏—Ü–∏–π

‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ü–†–û–¢–ò–í–û–†–ï–ß–ò–ï ‚Ññ2
–û–±—ä–µ–∫—Ç: –ü–∞—Ä—Ç–∏—Ü–∏—è ksk_result_2025_10_22 ‚Äî –≥—Ä–∞–Ω–∏—Ü—ã
- –í –∑–∞–ø—Ä–æ—Å–µ/–∫–æ–¥–µ: FROM ('2025-10-22 00:00:00') TO ('2025-10-22 23:59:59')
- –í —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ v3.7 (—Ä–∞–∑–¥–µ–ª 3, –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ): FROM ('2025-10-22 00:00:00') TO ('2025-10-23 00:00:00')
- –¢–∏–ø –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è: –ù–µ–≤–µ—Ä–Ω–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ TO (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å 00:00:00)
- –†–∏—Å–∫: –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö —Å timestamp 2025-10-22 23:59:59.001 ... 2025-10-22 23:59:59.999

‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ü–†–û–¢–ò–í–û–†–ï–ß–ò–ï ‚Ññ3
–û–±—ä–µ–∫—Ç: ksk_result.payment_type
- –í –∑–∞–ø—Ä–æ—Å–µ/–∫–æ–¥–µ: VARCHAR(30)
- –í —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ v3.6 (—Ä–∞–∑–¥–µ–ª 3, —Ç–∞–±–ª–∏—Ü–∞ ksk_result, –ø–æ–ª–µ ‚Ññ8): VARCHAR(20)
- –¢–∏–ø –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è: –ù–µ–≤–µ—Ä–Ω—ã–π —Ç–∏–ø –ø–æ–ª—è
- –†–∏—Å–∫: –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω–∏—Ç—Å—è, –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö

‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ü–†–û–¢–ò–í–û–†–ï–ß–ò–ï ‚Ññ4
–û–±—ä–µ–∫—Ç: payment_type –∑–Ω–∞—á–µ–Ω–∏–µ "W"
- –í –∑–∞–ø—Ä–æ—Å–µ/–∫–æ–¥–µ: payment_type = 'W'
- –í —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ v3.6 (—Ä–∞–∑–¥–µ–ª 1, –ì–ª–æ—Å—Å–∞—Ä–∏–π, Payment Type): –¥–æ–ø—É—Å—Ç–∏–º—ã –¢–û–õ–¨–ö–û I, O, T, M, V
- –¢–∏–ø –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è: –ù–µ–¥–æ–ø—É—Å—Ç–∏–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è
- –†–∏—Å–∫: CHECK constraint violation, runtime error

‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ü–†–û–¢–ò–í–û–†–ï–ß–ò–ï ‚Ññ5
–§—É–Ω–∫—Ü–∏—è: ksk_run_report()
- –í –∑–∞–ø—Ä–æ—Å–µ/–∫–æ–¥–µ: 5 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –í —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ v3.7 (—Ä–∞–∑–¥–µ–ª 8, –§—É–Ω–∫—Ü–∏–∏, ksk_run_report): 6 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (p_report_code, p_initiator, p_user_login, p_start_date, p_end_date, p_parameters)
- –¢–∏–ø –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è: –ù–µ–≤–µ—Ä–Ω–∞—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ —Ñ—É–Ω–∫—Ü–∏–∏
- –†–∏—Å–∫: –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π

---

‚õî –î–ï–ô–°–¢–í–ò–ï –ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù–û

–ö–æ–¥ –ù–ï –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω –¥–æ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π.

üîç –¢–†–ï–ë–£–ï–¢–°–Ø –£–¢–û–ß–ù–ï–ù–ò–ï –û–ü–ï–†–ê–¢–û–†–ê:

1. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ, —á—Ç–æ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ v3.7
   –ò–õ–ò
2. –£–∫–∞–∂–∏—Ç–µ, —á—Ç–æ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å (—Ç–æ–≥–¥–∞ —è –æ–±–Ω–æ–≤–ª—é –µ–≥–æ –¥–æ v3.8)
   –ò–õ–ò
3. –û–±—ä—è—Å–Ω–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –æ—Ç —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ (–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É—é –∫–∞–∫ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ)

‚ö†Ô∏è –ë–ï–ó –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–Ø –û–ü–ï–†–ê–¢–û–†–ê –ö–û–î –ù–ï –ë–£–î–ï–¢ –ü–†–ï–î–û–°–¢–ê–í–õ–ï–ù
```

---

### –®–ê–ì 5: –î–µ–π—Å—Ç–≤–∏–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

**‚úÖ –ï–°–õ–ò –ü–†–û–¢–ò–í–û–†–ï–ß–ò–ô –ù–ï–¢:**

```markdown
‚úÖ –ü–†–û–í–ï–†–ö–ê –ü–û –°–ü–†–ê–í–û–ß–ù–ò–ö–£ v3.7 –ü–†–û–ô–î–ï–ù–ê: –ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ

–°–≤–µ—Ä–µ–Ω–æ:
- –¢–∞–±–ª–∏—Ü–∞ ksk_result (34 –ø–æ–ª—è, PARTITION BY RANGE (output_timestamp), –ø–µ—Ä–∏–æ–¥ 1 –¥–µ–Ω—å) ‚Äî —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ 100%
- –§—É–Ω–∫—Ü–∏—è ksk_run_report (6 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤) ‚Äî —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ 100%
- –¢–∏–ø—ã –æ—Ç—á—ë—Ç–æ–≤ (5 —à—Ç) ‚Äî —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ 100%
- –ü–∞—Ä—Ç–∏—Ü–∏—è ksk_result_2025_10_22 (FROM '2025-10-22 00:00:00' TO '2025-10-23 00:00:00') ‚Äî —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ 100%

–ò—Å—Ç–æ—á–Ω–∏–∫: KSK-Schema-Reference-v3.7.md, —Ä–∞–∑–¥–µ–ª—ã 3, 5, 8

---

[–¢–≤–æ–π –æ–±—ã—á–Ω—ã–π –æ—Ç–≤–µ—Ç —Å –∫–æ–¥–æ–º/–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º]
```

**‚ùå –ï–°–õ–ò –ü–†–û–¢–ò–í–û–†–ï–ß–ò–Ø –ï–°–¢–¨:**

```markdown
‚ö†Ô∏è –ü–†–û–í–ï–†–ö–ê –ü–û –°–ü–†–ê–í–û–ß–ù–ò–ö–£ v3.7: –û–ë–ù–ê–†–£–ñ–ï–ù–´ –ü–†–û–¢–ò–í–û–†–ï–ß–ò–Ø

[–î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç –ø–æ –∫–∞–∂–¥–æ–º—É –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—é ‚Äî —Å–º. –®–ê–ì 4]

‚õî –î–ï–ô–°–¢–í–ò–ï –ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù–û

[–ó–∞–ø—Ä–æ—Å —É—Ç–æ—á–Ω–µ–Ω–∏—è —É –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ ‚Äî —Å–º. –®–ê–ì 4]
```

**–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:**

```markdown
‚úÖ –ü–û–õ–£–ß–ï–ù–û –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–ï –û–ü–ï–†–ê–¢–û–†–ê: [—Ü–∏—Ç–∞—Ç–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è]

‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –í–ï–†–°–ò–Ø (—Å–æ–≥–ª–∞—Å–Ω–æ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫—É v3.7):

[–ö–æ–¥ —Å —É—á—ë—Ç–æ–º —ç—Ç–∞–ª–æ–Ω–Ω—ã—Ö –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π –∏–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞]

---

üìù –ò–ó–ú–ï–ù–ï–ù–ò–Ø:
1. –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: PARTITION BY RANGE (date) ‚Üí PARTITION BY RANGE (output_timestamp)
2. –ì—Ä–∞–Ω–∏—Ü–∞ TO: '2025-10-22 23:59:59' ‚Üí '2025-10-23 00:00:00' (—Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å!)
3. –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä p_parameters –≤ ksk_run_report()

–ò—Å—Ç–æ—á–Ω–∏–∫: KSK-Schema-Reference-v3.7.md, —Ä–∞–∑–¥–µ–ª—ã 3, 8
```

---

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–í–ï–†–ö–ò (TOP 11 –û–®–ò–ë–û–ö)

### 1. has_bypass vs is_bypass (—á–∞—Å—Ç–æ –ø—É—Ç–∞—é—Ç!)

**‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:**

| –ü–æ–ª–µ | –¢–∞–±–ª–∏—Ü–∞ | DEFAULT | –ó–Ω–∞—á–µ–Ω–∏—è | –°–º—ã—Å–ª |
|------|---------|---------|----------|-------|
| has_bypass | ksk_result | 'empty' | yes/no/empty | –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ò–ú–ï–ï–¢ bypass —Ñ–∏–≥—É—Ä–∞–Ω—Ç–æ–≤ |
| is_bypass | ksk_figurant | 'no' | yes/no (–ë–ï–ó empty!) | –§–∏–≥—É—Ä–∞–Ω—Ç –ò–°–ö–õ–Æ–ß–Å–ù –∏–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ |

**‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:**
- –ü—É—Ç–∞—Ç—å has_bypass –∏ is_bypass
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –∫–∞–∫ —Å–∏–Ω–æ–Ω–∏–º—ã
- –ü—Ä–∏—Å–≤–∞–∏–≤–∞—Ç—å –∏–º –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å is_bypass='empty' (–ù–ï –°–£–©–ï–°–¢–í–£–ï–¢!)

**–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ v3.7:** –†–∞–∑–¥–µ–ª 1, "Bypass (–ò—Å–∫–ª—é—á–µ–Ω–∏–µ –∏–∑ –∫–æ–Ω—Ç—Ä–æ–ª—è)"

---

### 2. payment_type (—Å—Ç—Ä–æ–≥–æ 5 –∑–Ω–∞—á–µ–Ω–∏–π!)

**‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:**

| –ö–æ–¥ | –ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|--------------|----------|
| I | –í—Ö–æ–¥—è—â–∏–π | –ü–ª–∞—Ç—ë–∂ –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ –±–∞–Ω–∫–∞ –≤ –Ω–∞—à –±–∞–Ω–∫ |
| O | –ò—Å—Ö–æ–¥—è—â–∏–π | –ü–ª–∞—Ç—ë–∂ –∏–∑ –Ω–∞—à–µ–≥–æ –±–∞–Ω–∫–∞ –≤–æ –≤–Ω–µ—à–Ω–∏–π –±–∞–Ω–∫ |
| T | –¢—Ä–∞–Ω–∑–∏—Ç–Ω—ã–π | –ü–ª–∞—Ç—ë–∂ —á–µ—Ä–µ–∑ –Ω–∞—à –±–∞–Ω–∫ (–æ–±–∞ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞ –≤–Ω–µ—à–Ω–∏–µ) |
| M | –ú–µ–∂—Ñ–∏–ª–∏–∞–ª—å–Ω—ã–π | –ü–ª–∞—Ç—ë–∂ –º–µ–∂–¥—É —Ñ–∏–ª–∏–∞–ª–∞–º–∏ –Ω–∞—à–µ–≥–æ –±–∞–Ω–∫–∞ |
| V | –í–Ω—É—Ç—Ä–∏—Ñ–∏–ª–∏–∞–ª—å–Ω—ã–π | –ü–ª–∞—Ç—ë–∂ –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ —Ñ–∏–ª–∏–∞–ª–∞ |

**‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:**
- –õ—é–±—ã–µ –¥—Ä—É–≥–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è (W, X, Y, Z, N, S)
- –ù–µ—Ç–æ—á–Ω—ã–µ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ ("—Ç—Ä–∞–Ω–∑–∏—Ç" –≤–º–µ—Å—Ç–æ "–¢—Ä–∞–Ω–∑–∏—Ç–Ω—ã–π")
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞ (i, o, t, m, v)
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞

**–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ v3.7:** –†–∞–∑–¥–µ–ª 1, "Payment Type (–¢–∏–ø –ø–ª–∞—Ç–µ–∂–∞)"

---

### 3. resolution (—Å—Ç—Ä–æ–≥–æ 4 –∑–Ω–∞—á–µ–Ω–∏—è!)

**‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:**

| –ó–Ω–∞—á–µ–Ω–∏–µ | –ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ | –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ |
|----------|--------------|---------------|
| allow | –†–∞–∑—Ä–µ—à–∏—Ç—å | –í—Å–µ —Ñ–∏–≥—É—Ä–∞–Ω—Ç—ã –∏–º–µ—é—Ç —Å—Ç–∞—Ç—É—Å allow |
| review | –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ | –•–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ñ–∏–≥—É—Ä–∞–Ω—Ç review, –Ω–µ—Ç deny |
| deny | –û—Ç–∫–ª–æ–Ω–∏—Ç—å | –•–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ñ–∏–≥—É—Ä–∞–Ω—Ç deny |
| empty | –ù–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π | –ú–∞—Å—Å–∏–≤ searchCheckResultKCKH –ø—É—Å—Ç |

**‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å "approved" –≤–º–µ—Å—Ç–æ "allow"
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å "rejected" –≤–º–µ—Å—Ç–æ "deny"
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å "pending" –≤–º–µ—Å—Ç–æ "review"
- –î–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –±–µ–∑ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∞–≥—Ä–µ–≥–∞—Ü–∏–∏:** `deny` > `review` > `allow` > `empty`

**–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ v3.7:** –†–∞–∑–¥–µ–ª 1, "Resolution (–†–µ–∑–æ–ª—é—Ü–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏)"

---

### 4. ksk_run_report() ‚Äî 6 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –Ω–µ 5!

**‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:**

```sql
SELECT ksk_run_report(
  p_report_code := 'totals',        -- VARCHAR (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
  p_initiator := 'system',          -- VARCHAR (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
  p_user_login := NULL,             -- VARCHAR (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π)
  p_start_date := '2025-10-22',     -- DATE DEFAULT CURRENT_DATE
  p_end_date := NULL,               -- DATE DEFAULT NULL (= p_start_date)
  p_parameters := NULL              -- JSONB DEFAULT NULL
);
```

**‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:**
- 5 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (–ø—Ä–æ–ø—É—â–µ–Ω p_parameters)
- –ù–µ–≤–µ—Ä–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ù–µ–≤–µ—Ä–Ω—ã–µ —Ç–∏–ø—ã (TIMESTAMP –≤–º–µ—Å—Ç–æ DATE)
- –ù–µ–≤–µ—Ä–Ω—ã–π —Ç–∏–ø –≤–æ–∑–≤—Ä–∞—Ç–∞ (VOID –≤–º–µ—Å—Ç–æ INTEGER)

**–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ v3.7:** –†–∞–∑–¥–µ–ª 8, "–§—É–Ω–∫—Ü–∏–∏", "ksk_run_report()"

---

### 5. p_parameters ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è figurants!

**‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:**

```sql
-- –û—Ç—á—ë—Ç figurants –° –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º p_parameters
SELECT ksk_run_report('figurants', 'user', 'ivanov', '2025-10-22', NULL,
  '{"list_codes": ["4200", "4204"]}'::JSONB);

-- –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á—ë—Ç—ã –ë–ï–ó p_parameters
SELECT ksk_run_report('totals', 'system', NULL, '2025-10-22', NULL, NULL);
```

**‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å p_parameters –¥–ª—è –æ—Ç—á—ë—Ç–æ–≤ totals, list_totals, totals_by_payment_type, list_totals_by_payment_type
- –û–∂–∏–¥–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ list_codes –¥–ª—è –æ—Ç—á—ë—Ç–æ–≤, –∫—Ä–æ–º–µ figurants

**–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ v3.7:** –†–∞–∑–¥–µ–ª 5, "–¢–∏–ø—ã –æ—Ç—á—ë—Ç–æ–≤", "5. figurants"

---

### 6. ksk_report_review() ‚Äî –ù–ï —á–µ—Ä–µ–∑ ksk_run_report!

**‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:**

```sql
-- –û—Ç—á—ë—Ç review –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ù–ê–ü–†–Ø–ú–£–Æ
SELECT * FROM ksk_report_review('2025-10-22');
```

**‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:**

```sql
-- –û–®–ò–ë–ö–ê: review –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ ksk_run_report
SELECT ksk_run_report('review', 'system', NULL, '2025-10-22');
```

**–†–∞–∑–ª–∏—á–∏—è:**

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –û–±—ã—á–Ω—ã–µ –æ—Ç—á—ë—Ç—ã (totals, list_totals, figurants) | ksk_report_review |
|----------|--------------------------------------------------|-------------------|
| –í—ã–∑–æ–≤ | –ß–µ—Ä–µ–∑ ksk_run_report('totals', ...) | –ù–∞–ø—Ä—è–º—É—é SELECT * FROM ksk_report_review('2025-10-22') |
| –•—Ä–∞–Ω–µ–Ω–∏–µ | –ú–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ —Ç–∞–±–ª–∏—Ü–µ (ksk_report_*_data) | –ù–ï–¢ —Ö—Ä–∞–Ω–µ–Ω–∏—è (—Ç–æ–ª—å–∫–æ VIEW/query) |
| –ó–∞–≥–æ–ª–æ–≤–æ–∫ | –°–æ–∑–¥–∞—ë—Ç—Å—è –≤ ksk_report_header | –ù–ï–¢ –∑–∞–≥–æ–ª–æ–≤–∫–∞ |
| TTL | 7-365 –¥–Ω–µ–π | –ù–µ—Ç (–¥–∞–Ω–Ω—ã–µ –ù–ï —Ö—Ä–∞–Ω—è—Ç—Å—è) |
| –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä | –ï—Å—Ç—å –∑–∞–ø–∏—Å—å –≤ ksk_report_orchestrator | –ù–ï–¢ –∑–∞–ø–∏—Å–∏ –≤ orchestrator |

**–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ v3.7:** –†–∞–∑–¥–µ–ª 6, "–û—Ç—á—ë—Ç –ø–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è–º"

---

### 7. –¢–∏–ø—ã –æ—Ç—á—ë—Ç–æ–≤ ‚Äî —Ç–æ–ª—å–∫–æ 5, review –æ—Ç–¥–µ–ª—å–Ω–æ!

**‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:**

| report_code | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-------------|------------|
| totals | –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ |
| totals_by_payment_type | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∏–ø–∞–º –ø–ª–∞—Ç–µ–∂–µ–π |
| list_totals | –ò—Ç–æ–≥–∏ –ø–æ —Å–ø–∏—Å–∫–∞–º |
| list_totals_by_payment_type | –ò—Ç–æ–≥–∏ –ø–æ —Å–ø–∏—Å–∫–∞–º –∏ —Ç–∏–ø–∞–º –ø–ª–∞—Ç–µ–∂–µ–π |
| figurants | –û—Ç—á—ë—Ç –ø–æ —Ñ–∏–≥—É—Ä–∞–Ω—Ç–∞–º |

**review –ù–ï –í –≠–¢–û–ú –°–ü–ò–°–ö–ï!** –≠—Ç–æ –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –Ω–µ —á–µ—Ä–µ–∑ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä.

**‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:**
- –î–æ–±–∞–≤–ª—è—Ç—å report_code='review' –≤ ksk_report_orchestrator
- –í—ã–∑—ã–≤–∞—Ç—å ksk_run_report('review', ...)
- –°–æ–∑–¥–∞–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É ksk_report_review_data

**–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ v3.7:** –†–∞–∑–¥–µ–ª 5, "–¢–∏–ø—ã –æ—Ç—á—ë—Ç–æ–≤ (5 —à—Ç)"

---

### 8. list_codes ‚Äî –º–∞—Å—Å–∏–≤ TEXT[], –Ω–µ —Å—Ç—Ä–æ–∫–∞!

**‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:**

```sql
-- ksk_result.list_codes
list_codes TEXT[] DEFAULT NULL

-- –ò–Ω–¥–µ–∫—Å GIN –¥–ª—è –º–∞—Å—Å–∏–≤–∞
CREATE INDEX idx_ksk_result_list_codes_gin ON ksk_result USING GIN (list_codes);

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ö–æ–∂–¥–µ–Ω–∏—è
WHERE '4200' = ANY(list_codes)
```

**‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:**

```sql
-- –û–®–ò–ë–ö–ê: list_codes –ù–ï VARCHAR!
list_codes VARCHAR(500)

-- –û–®–ò–ë–ö–ê: –ù–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å B-tree –¥–ª—è –º–∞—Å—Å–∏–≤–∞
CREATE INDEX idx_ksk_result_list_codes ON ksk_result (list_codes);
```

**–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ v3.7:** –†–∞–∑–¥–µ–ª 3, "–î–æ–º–µ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã", "ksk_result", –ø–æ–ª–µ ‚Ññ10

---

### 9. JSONB –ø–æ–ª—è ‚Äî STORAGE EXTERNAL!

**‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:**

```sql
-- –í—Å–µ JSONB –ø–æ–ª—è —Å EXTERNAL STORAGE
input_json JSONB,
output_json JSONB,
figurant JSONB NOT NULL,
match JSONB NOT NULL,
...

-- –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã
ALTER TABLE ksk_result ALTER COLUMN input_json SET STORAGE EXTERNAL;
ALTER TABLE ksk_result ALTER COLUMN output_json SET STORAGE EXTERNAL;
```

**‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:**

```sql
-- –û–®–ò–ë–ö–ê: –±–µ–∑ STORAGE EXTERNAL JSONB –ø–æ–ø–∞–¥—ë—Ç –≤ TOAST, –∑–∞–º–µ–¥–ª–∏—Ç –∑–∞–ø—Ä–æ—Å—ã
-- (–Ω–µ—Ç —è–≤–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è STORAGE)
```

**–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ v3.7:** –†–∞–∑–¥–µ–ª 3, "–î–æ–º–µ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã", "–û–±—â–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏"

---

### 10. –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî RANGE –ø–æ TIMESTAMP, –ù–ï DATE!

**‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:**

```sql
-- ksk_result
CREATE TABLE ksk_result (
  ...
  date DATE NOT NULL,
  output_timestamp TIMESTAMP(3) NOT NULL,
  ...
  PRIMARY KEY (id, output_timestamp)
) PARTITION BY RANGE (output_timestamp);  -- ‚úÖ –ü–æ TIMESTAMP!

-- ksk_figurant
CREATE TABLE ksk_figurant (
  ...
  date DATE NOT NULL,
  timestamp TIMESTAMP(3) NOT NULL,
  ...
  PRIMARY KEY (id, timestamp)
) PARTITION BY RANGE (timestamp);  -- ‚úÖ –ü–æ TIMESTAMP!

-- ksk_figurant_match
CREATE TABLE ksk_figurant_match (
  ...
  date DATE NOT NULL,
  timestamp TIMESTAMP(3) NOT NULL,
  ...
  PRIMARY KEY (id, timestamp)
) PARTITION BY RANGE (timestamp);  -- ‚úÖ –ü–æ TIMESTAMP!
```

**‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:**

```sql
-- –û–®–ò–ë–ö–ê: –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ DATE –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ
PARTITION BY RANGE (date)  -- ‚ùå
```

**–ü–æ—á–µ–º—É TIMESTAMP, –∞ –Ω–µ DATE:**
1. **PRIMARY KEY** –≤–∫–ª—é—á–∞–µ—Ç TIMESTAMP (output_timestamp/timestamp), –ù–ï date
2. **–ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ TIMESTAMP** –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—Ç—å —Å—Ç–∞—Ä—ã–µ –ø–∞—Ä—Ç–∏—Ü–∏–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (—Å —Ç–æ—á–Ω–æ—Å—Ç—å—é –¥–æ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥)
3. **–ü–æ–ª–µ date** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏, –Ω–æ –ù–ï –¥–ª—è –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
4. **–°–æ–∑–¥–∞–Ω–∏–µ –ø–∞—Ä—Ç–∏—Ü–∏–π:** —Ñ—É–Ω–∫—Ü–∏—è `ksk_create_partitions()` —Å–æ–∑–¥–∞—ë—Ç –ø–∞—Ä—Ç–∏—Ü–∏–∏ –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞–º TIMESTAMP (FROM ... TO ...)

**–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ v3.7:** –†–∞–∑–¥–µ–ª 3, "–î–æ–º–µ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã", "–ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ"

---

### 11. –ü–µ—Ä–∏–æ–¥ –ø–∞—Ä—Ç–∏—Ü–∏–∏ ‚Äî 1 –î–ï–ù–¨, –≥—Ä–∞–Ω–∏—Ü—ã FROM ... TO ...

**‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:**

```sql
-- –ü–∞—Ä—Ç–∏—Ü–∏—è –∑–∞ 22 –æ–∫—Ç—è–±—Ä—è 2025
CREATE TABLE ksk_result_2025_10_22 PARTITION OF ksk_result
FOR VALUES FROM ('2025-10-22 00:00:00') TO ('2025-10-23 00:00:00');

-- ‚úÖ –ü–µ—Ä–∏–æ–¥: 1 –î–ï–ù–¨ (24 —á–∞—Å–∞)
-- ‚úÖ FROM: 2025-10-22 00:00:00.000 (–≤–∫–ª—é—á–∞—è)
-- ‚úÖ TO: 2025-10-23 00:00:00.000 (–ù–ï –≤–∫–ª—é—á–∞—è ‚Äî –≠–ö–°–ö–õ–Æ–ó–ò–í–ù–ê–Ø –≥—Ä–∞–Ω–∏—Ü–∞!)
-- ‚úÖ –î–∏–∞–ø–∞–∑–æ–Ω: [FROM, TO) = [2025-10-22 00:00:00.000, 2025-10-23 00:00:00.000)
-- ‚úÖ –í–∫–ª—é—á–∞–µ—Ç: 2025-10-22 00:00:00.000 ... 2025-10-22 23:59:59.999
-- ‚ùå –ù–ï –≤–∫–ª—é—á–∞–µ—Ç: 2025-10-23 00:00:00.000 –∏ –ø–æ–∑–∂–µ
```

**‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:**

```sql
-- –û–®–ò–ë–ö–ê 1: –ì—Ä–∞–Ω–∏—Ü–∞ TO –Ω–µ–≤–µ—Ä–Ω–∞—è (23:59:59 –≤–º–µ—Å—Ç–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –¥–Ω—è 00:00:00)
CREATE TABLE ksk_result_2025_10_22 PARTITION OF ksk_result
FOR VALUES FROM ('2025-10-22 00:00:00') TO ('2025-10-22 23:59:59');
-- ‚ùå –ü–æ—Ç–µ—Ä—è–µ–º –¥–∞–Ω–Ω—ã–µ —Å timestamp 2025-10-22 23:59:59.001 ... 2025-10-22 23:59:59.999

-- –û–®–ò–ë–ö–ê 2: –ü–µ—Ä–∏–æ–¥ –ù–ï 1 –¥–µ–Ω—å (–Ω–µ–¥–µ–ª—è)
CREATE TABLE ksk_result_2025_10_22 PARTITION OF ksk_result
FOR VALUES FROM ('2025-10-22 00:00:00') TO ('2025-10-29 00:00:00');
-- ‚ùå –ü–µ—Ä–∏–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 1 –î–ï–ù–¨, –Ω–µ 7 –¥–Ω–µ–π!

-- –û–®–ò–ë–ö–ê 3: –ì—Ä–∞–Ω–∏—Ü—ã –±–µ–∑ –≤—Ä–µ–º–µ–Ω–∏
CREATE TABLE ksk_result_2025_10_22 PARTITION OF ksk_result
FOR VALUES FROM ('2025-10-22') TO ('2025-10-23');
-- ‚ùå –ù—É–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –≤—Ä–µ–º—è: '2025-10-22 00:00:00'
```

**–§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–∞—Ä—Ç–∏—Ü–∏–π:**
```sql
SELECT * FROM ksk_create_partitions('ksk_result', 7);

-- –í–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏:
-- CREATE TABLE %I PARTITION OF %I FOR VALUES FROM (%L) TO (%L);
-- %L –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∫–∞–∫ 'YYYY-MM-DD 00:00:00'
```

**‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û:**
- **–ü–µ—Ä–∏–æ–¥:** –í–°–ï–ì–î–ê 1 –î–ï–ù–¨ (24 —á–∞—Å–∞)
- **FROM:** YYYY-MM-DD **00:00:00** (–≤–∫–ª—é—á–∞—è)
- **TO:** YYYY-MM-DD **00:00:00** —Å–ª–µ–¥—É—é—â–µ–≥–æ –¥–Ω—è (–ù–ï –≤–∫–ª—é—á–∞—è ‚Äî —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–∞—è –≥—Ä–∞–Ω–∏—Ü–∞!)
- **–î–∏–∞–ø–∞–∑–æ–Ω:** **[FROM, TO)** ‚Äî –≤–∫–ª—é—á–∞–µ—Ç FROM, –ù–ï –≤–∫–ª—é—á–∞–µ—Ç TO

**–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ v3.7:** –†–∞–∑–¥–µ–ª 3, "–î–æ–º–µ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã", "–ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ", –ø–æ–¥—Ä–∞–∑–¥–µ–ª "üîë –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ"

---

## üìù –§–û–†–ú–ê–¢ –û–¢–í–ï–¢–ê (–®–ê–ë–õ–û–ù–´)

### –®–∞–±–ª–æ–Ω 1: –ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π –ù–ï–¢

```markdown
‚úÖ –ü–†–û–í–ï–†–ö–ê –ü–û –°–ü–†–ê–í–û–ß–ù–ò–ö–£ v3.7 –ü–†–û–ô–î–ï–ù–ê

–°–≤–µ—Ä–µ–Ω–æ —Å KSK-Schema-Reference-v3.7.md:
- –¢–∞–±–ª–∏—Ü–∞ ksk_result (34 –ø–æ–ª—è, 5 –∏–Ω–¥–µ–∫—Å–æ–≤, PARTITION BY RANGE (output_timestamp), –ø–µ—Ä–∏–æ–¥ 1 –¥–µ–Ω—å) ‚Äî —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ 100%
- –§—É–Ω–∫—Ü–∏—è ksk_run_report (6 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤) ‚Äî —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ 100%
- –¢–∏–ø—ã –æ—Ç—á—ë—Ç–æ–≤ (5 —à—Ç: totals, list_totals, figurants, totals_by_payment_type, list_totals_by_payment_type) ‚Äî —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ 100%
- Payment types (I/O/T/M/V) ‚Äî —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ 100%
- Resolution (allow/review/deny/empty) ‚Äî —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ 100%
- –ü–∞—Ä—Ç–∏—Ü–∏—è ksk_result_2025_10_22 (FROM '2025-10-22 00:00:00' TO '2025-10-23 00:00:00') ‚Äî —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ 100%

–ò—Å—Ç–æ—á–Ω–∏–∫: KSK-Schema-Reference-v3.7.md, —Ä–∞–∑–¥–µ–ª—ã 1, 3, 5, 8

---

[–¢–≤–æ–π –æ–±—ã—á–Ω—ã–π –æ—Ç–≤–µ—Ç —Å –∫–æ–¥–æ–º/–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º]
```

---

### –®–∞–±–ª–æ–Ω 2: –ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è –ï–°–¢–¨ ‚Üí –ë–õ–û–ö–ò–†–û–í–ö–ê

```markdown
‚ö†Ô∏è –ü–†–û–í–ï–†–ö–ê –ü–û –°–ü–†–ê–í–û–ß–ù–ò–ö–£ v3.7: –û–ë–ù–ê–†–£–ñ–ï–ù–´ –ü–†–û–¢–ò–í–û–†–ï–ß–ò–Ø

‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ü–†–û–¢–ò–í–û–†–ï–ß–ò–ï ‚Ññ1
[–¥–µ—Ç–∞–ª–∏ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è ‚Äî —Å–º. –®–ê–ì 4]

‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ü–†–û–¢–ò–í–û–†–ï–ß–ò–ï ‚Ññ2
[–¥–µ—Ç–∞–ª–∏ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è ‚Äî —Å–º. –®–ê–ì 4]

---

‚õî –î–ï–ô–°–¢–í–ò–ï –ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù–û

–ö–æ–¥ –ù–ï –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω –¥–æ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π.

üîç –¢–†–ï–ë–£–ï–¢–°–Ø –£–¢–û–ß–ù–ï–ù–ò–ï –û–ü–ï–†–ê–¢–û–†–ê:

1. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ, —á—Ç–æ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ v3.7
   –ò–õ–ò
2. –£–∫–∞–∂–∏—Ç–µ, —á—Ç–æ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å (—Ç–æ–≥–¥–∞ —è –æ–±–Ω–æ–≤–ª—é –µ–≥–æ –¥–æ v3.8)
   –ò–õ–ò
3. –û–±—ä—è—Å–Ω–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –æ—Ç —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ (–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É—é –∫–∞–∫ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ)

‚ö†Ô∏è –ë–ï–ó –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–Ø –û–ü–ï–†–ê–¢–û–†–ê –ö–û–î –ù–ï –ë–£–î–ï–¢ –ü–†–ï–î–û–°–¢–ê–í–õ–ï–ù
```

---

### –®–∞–±–ª–æ–Ω 3: –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

```markdown
‚úÖ –ü–û–õ–£–ß–ï–ù–û –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–ï –û–ü–ï–†–ê–¢–û–†–ê

–¶–∏—Ç–∞—Ç–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è: "[—Ü–∏—Ç–∞—Ç–∞ –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞]"

---

‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –í–ï–†–°–ò–Ø (—Å–æ–≥–ª–∞—Å–Ω–æ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫—É v3.7):

[–ö–æ–¥ —Å —É—á—ë—Ç–æ–º —ç—Ç–∞–ª–æ–Ω–Ω—ã—Ö –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π –∏–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞]

---

üìù –ò–ó–ú–ï–ù–ï–ù–ò–Ø:

1. –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: PARTITION BY RANGE (date) ‚Üí PARTITION BY RANGE (output_timestamp)
   –ò—Å—Ç–æ—á–Ω–∏–∫: KSK-Schema-Reference-v3.7.md, —Ä–∞–∑–¥–µ–ª 3, –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

2. –ì—Ä–∞–Ω–∏—Ü–∞ TO: '2025-10-22 23:59:59' ‚Üí '2025-10-23 00:00:00' (—Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å!)
   –ò—Å—Ç–æ—á–Ω–∏–∫: KSK-Schema-Reference-v3.7.md, —Ä–∞–∑–¥–µ–ª 3, –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, "–ì—Ä–∞–Ω–∏—Ü—ã –ø–∞—Ä—Ç–∏—Ü–∏–∏"

3. ksk_run_report(): –¥–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä p_parameters JSONB DEFAULT NULL
   –ò—Å—Ç–æ—á–Ω–∏–∫: KSK-Schema-Reference-v3.7.md, —Ä–∞–∑–¥–µ–ª 8.2

---

‚úÖ –ü–†–û–í–ï–†–ö–ê –ü–û–°–õ–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô: –ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ
```

---

## üîÑ –ö–û–ì–î–ê –û–ë–ù–û–í–õ–Ø–¢–¨ –°–ü–†–ê–í–û–ß–ù–ò–ö

**–¢—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ –¥–æ v3.8, v3.9, v4.0:**

1. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î**
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –ø–æ–ª–µ–π
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ DEFAULT –∑–Ω–∞—á–µ–Ω–∏–π
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ CHECK constraints
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ FK —Å–≤—è–∑–µ–π
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (–∫–ª—é—á, –ø–µ—Ä–∏–æ–¥, –≥—Ä–∞–Ω–∏—Ü—ã)

2. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π**
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–∏–≥–Ω–∞—Ç—É—Ä (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã, —Ç–∏–ø—ã –≤–æ–∑–≤—Ä–∞—Ç–∞)
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —Ñ—É–Ω–∫—Ü–∏–π (–µ—Å–ª–∏ —ç—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç)

3. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –æ—Ç—á—ë—Ç–æ–≤**
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –æ—Ç—á—ë—Ç–æ–≤ –≤ ksk_report_orchestrator
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü ksk_report_*_data

4. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ CRON –∑–∞–¥–∞—á**
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á pg_cron
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∑–∞–¥–∞—á

**–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**

1. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ (v3.8, v3.9, v4.0)
2. –î–æ–±–∞–≤–∏—Ç—å –≤ —Ä–∞–∑–¥–µ–ª "–ò–°–¢–û–†–ò–Ø –ò–ó–ú–ï–ù–ï–ù–ò–ô" –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
3. –û–±–Ω–æ–≤–∏—Ç—å –¥–∞—Ç—É –∏ –≤–µ—Ä—Å–∏—é –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ
4. –£–≤–µ–¥–æ–º–∏—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –æ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏
5. –û–±–Ω–æ–≤–∏—Ç—å VALIDATION_PROMPT_KSK –¥–æ –≤–µ—Ä—Å–∏–∏ 2.3, 2.4, 3.0 (–µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –ø—Ä–∞–≤–∏–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏)
6. **–ö–†–ò–¢–ò–ß–ù–û:** –£–≤–µ–¥–æ–º–∏—Ç—å –í–°–Æ –ö–û–ú–ê–ù–î–£ –æ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞!

**–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- **v3.X ‚Üí v3.(X+1):** –ú–∏–Ω–æ—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π, —Ñ—É–Ω–∫—Ü–∏–π, –∏–Ω–¥–µ–∫—Å–æ–≤, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫)
- **v3.X ‚Üí v4.0:** –ú–∞–∂–æ—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (–∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü, —É–¥–∞–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤, breaking changes)

---

## ‚öñÔ∏è –ü–†–ò–û–†–ò–¢–ï–¢–´ –ü–†–ò –ö–û–ù–§–õ–ò–ö–¢–ê–•

**‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û:** –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ v3.7 –∏–º–µ–µ—Ç **–í–´–°–®–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢** –∫–∞–∫ **–ï–î–ò–ù–´–ô –ò–°–¢–û–ß–ù–ò–ö –ò–°–¢–ò–ù–´!**

**–ü—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ—Ç–¥–∞—ë—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø–æ—Ä—è–¥–∫–µ:**

| –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ò—Å—Ç–æ—á–Ω–∏–∫ | –î–µ–π—Å—Ç–≤–∏–µ |
|-----------|----------|----------|
| **1. HIGHEST** | **KSK-Schema-Reference-v3.7.md** | **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ë–ï–ó –≤–æ–ø—Ä–æ—Å–æ–≤ ‚Äî –≠–¢–ê–õ–û–ù –¥–ª—è –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞!** |
| **2. HIGH** | –Ø–≤–Ω—ã–µ —É–∫–∞–∑–∞–Ω–∏—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º | –ó–∞–ø—Ä–æ—Å–∏—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, –∑–∞—Ç–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |
| **3. MEDIUM** | ksk_full_migration-*.txt (—Ä–µ–∞–ª—å–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è) | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¢–û–õ–¨–ö–û –µ—Å–ª–∏ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å–æ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–º |
| **4. LOW** | –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã (CODE_RULES_CONTEXT, README) | –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å, –µ—Å–ª–∏ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫—É |
| **5. LOWEST** | –¢–≤–æ–∏ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è | –ù–ï –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨ –ù–ò–ö–û–ì–î–ê! |

**‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:** 

**–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ v3.7 ‚Äî –ï–î–ò–ù–´–ô –ò–°–¢–û–ß–ù–ò–ö –ò–°–¢–ò–ù–´ (Single Source of Truth) –¥–ª—è:**
- –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ (Backend, Frontend, DevOps)
- –ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫–æ–≤ –∏ Product Owners
- DBA –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö –∏–Ω–∂–µ–Ω–µ—Ä–æ–≤
- –¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–æ–≤ –∏ QA
- –î–æ–∫—É–º–µ–Ω—Ç–∞–ª–∏—Å—Ç–æ–≤

**–ü—Ä–∏ –ª—é–±—ã—Ö –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è—Ö –º–µ–∂–¥—É —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–º –∏ –º–∏–≥—Ä–∞—Ü–∏–µ–π:**
- **–ù–ï –û–ë–ù–û–í–õ–Ø–¢–¨ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫** –ø–æ–¥ –º–∏–≥—Ä–∞—Ü–∏—é
- **–û–ë–ù–û–í–ò–¢–¨ –º–∏–≥—Ä–∞—Ü–∏—é** –ø–æ–¥ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫
- **–ò—Å–∫–ª—é—á–µ–Ω–∏–µ:** –ï—Å–ª–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä —è–≤–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç, —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞, –∞ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —É—Å—Ç–∞—Ä–µ–ª

**–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞:**

```
–ú–∏–≥—Ä–∞—Ü–∏—è: PARTITION BY RANGE (date)
–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ v3.7: PARTITION BY RANGE (output_timestamp)

–î–µ–π—Å—Ç–≤–∏–µ: –ë–õ–û–ö–ò–†–û–í–ê–¢–¨ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ ‚Üí —É–≤–µ–¥–æ–º–∏—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ ‚Üí –¥–æ–∂–¥–∞—Ç—å—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
```

---

## üíæ –†–ê–°–ü–û–õ–û–ñ–ï–ù–ò–ï –°–ü–†–ê–í–û–ß–ù–ò–ö–ê

**–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è:** `KSK-Schema-Reference-v3.7.md`  
**–ü—É—Ç—å:** –§–∞–π–ª—ã –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –ö–°–ö  
**–î–∞—Ç–∞:** 31.10.2025 01:42 MSK  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –≠–¢–ê–õ–û–ù ‚Äî –ï–î–ò–ù–´–ô –ò–°–¢–û–ß–ù–ò–ö –ò–°–¢–ò–ù–´ –¥–ª—è –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞

**–ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π:**
- v1.0: –ü–µ—Ä–≤–∞—è –≤–µ—Ä—Å–∏—è
- v2.0: –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã matches, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è
- v3.0: –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã, —Ä–µ–∞–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã, –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ–ª–µ–π
- v3.3: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è has_bypass='empty', is_bypass (–¢–û–õ–¨–ö–û yes/no)
- v3.4: –î–æ–±–∞–≤–ª–µ–Ω—ã —Ä–∞–∑–¥–µ–ª—ã "–¢–∏–ø—ã –æ—Ç—á—ë—Ç–æ–≤", "–û—Ç—á—ë—Ç –ø–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è–º", "CRON"
- v3.5: –ò–∑–º–µ–Ω–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è (–¢–∏–ø—ã –æ—Ç—á—ë—Ç–æ–≤ ‚Üí –û—Ç—á—ë—Ç review ‚Üí –û—Ç—á—ë—Ç–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã)
- v3.6: **–ò–°–ü–†–ê–í–õ–ï–ù–û –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï:** –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ PARTITION BY RANGE (output_timestamp/timestamp), –ù–ï date
- v3.7: **–î–û–ë–ê–í–õ–ï–ù–û –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï:** –ü–µ—Ä–∏–æ–¥ –ø–∞—Ä—Ç–∏—Ü–∏–∏ (1 –¥–µ–Ω—å), –≥—Ä–∞–Ω–∏—Ü—ã (FROM ... TO ...), —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ—Å—Ç—å TO, —Å—Ç–∞—Ç—É—Å –≠–¢–ê–õ–û–ù

---

## ‚úã –ò–°–ö–õ–Æ–ß–ï–ù–ò–Ø (–∫–æ–≥–¥–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –ù–ï —Ç—Ä–µ–±—É–µ—Ç—Å—è)

**–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ù–ï –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è:**

1. **–í–æ–ø—Ä–æ—Å–æ–≤, –Ω–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –ë–î**
   - –û–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã –æ —Å–∏—Å—Ç–µ–º–µ –ö–°–ö (–∫–æ–Ω—Ü–µ–ø—Ü–∏–∏, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
   - –û–±—Å—É–∂–¥–µ–Ω–∏—è –ø–æ–¥—Ö–æ–¥–æ–≤ (–±–µ–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ–¥–∞)
   - –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–±–µ–∑ SQL/DDL)

2. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏–π**
   - –ù–∞–ø–∏—Å–∞–Ω–∏–µ README, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
   - –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏–∞–≥—Ä–∞–º–º (–µ—Å–ª–∏ –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î)
   - –û–ø–∏—Å–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤

3. **–ü—Ä–∏–º–µ—Ä–æ–≤ –¥–∞–Ω–Ω—ã—Ö**
   - JSON –≤ —Ñ–∞–π–ª–∞—Ö input.json, output.json
   - –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (–µ—Å–ª–∏ –Ω–µ –∫–∞—Å–∞—é—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î)

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –ï—Å–ª–∏ –µ—Å—Ç—å –ú–ê–õ–ï–ô–®–ï–ï —Å–æ–º–Ω–µ–Ω–∏–µ ‚Äî –ü–†–û–í–ï–†–ò–¢–¨ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫! –õ—É—á—à–µ –ª–∏—à–Ω–∏–π —Ä–∞–∑ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á–µ–º –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–µ.

---

## üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì –°–û–ë–õ–Æ–î–ï–ù–ò–Ø –ü–†–ê–í–ò–õ

**–í –∫–æ–Ω—Ü–µ –∫–∞–∂–¥–æ–≥–æ –æ—Ç–≤–µ—Ç–∞, –∫–∞—Å–∞—é—â–µ–≥–æ—Å—è –ë–î, –ø–æ–∫–∞–∑—ã–≤–∞–π –∫—Ä–∞—Ç–∫–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏:**

### ‚úÖ –§–æ—Ä–º–∞—Ç –ø—Ä–∏ –û–¢–°–£–¢–°–¢–í–ò–ò –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π:

```
‚úÖ –í–ê–õ–ò–î–ê–¶–ò–Ø –ü–†–û–ô–î–ï–ù–ê (5/5 —à–∞–≥–æ–≤)
–°–≤–µ—Ä–µ–Ω–æ: ksk_result (34 –ø–æ–ª—è, PARTITION BY RANGE (output_timestamp), –ø–µ—Ä–∏–æ–¥ 1 –¥–µ–Ω—å, FROM '2025-10-22 00:00:00' TO '2025-10-23 00:00:00'), ksk_run_report (6 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤), payment_type (I/O/T/M/V)
–ò—Å—Ç–æ—á–Ω–∏–∫: KSK-Schema-Reference-v3.7.md, —Ä–∞–∑–¥–µ–ª—ã 1, 3, 8
```

### ‚ö†Ô∏è –§–æ—Ä–º–∞—Ç –ø—Ä–∏ –ù–ê–õ–ò–ß–ò–ò –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π:

```
‚ö†Ô∏è –í–ê–õ–ò–î–ê–¶–ò–Ø: –û–ë–ù–ê–†–£–ñ–ï–ù–´ –ü–†–û–¢–ò–í–û–†–ï–ß–ò–Ø (—Å–º. –æ—Ç—á—ë—Ç –≤—ã—à–µ)
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –û–ø–µ—Ä–∞—Ç–æ—Ä –≤–∏–¥–∏—Ç, —á—Ç–æ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
- –ö–æ–º–ø–∞–∫—Ç–Ω–æ (–Ω–µ –∑–∞—Å–æ—Ä—è–µ—Ç –æ—Ç–≤–µ—Ç)
- –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–∞

---

## üöÄ –ü–†–ò–ú–ï–†–´ –ü–†–ò–ú–ï–ù–ï–ù–ò–Ø

### –ü—Ä–∏–º–µ—Ä 1: –í–æ–ø—Ä–æ—Å –æ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–∞—Ä—Ç–∏—Ü–∏–∏

**–í–æ–ø—Ä–æ—Å –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞:**
```
–°–æ–∑–¥–∞–π –ø–∞—Ä—Ç–∏—Ü–∏—é –¥–ª—è ksk_result –∑–∞ 22 –æ–∫—Ç—è–±—Ä—è 2025
```

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è: —Ç–∞–±–ª–∏—Ü–∞ ksk_result, –ø–∞—Ä—Ç–∏—Ü–∏—è, –¥–∞—Ç–∞ 2025-10-22
2. –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ v3.7 (—Ä–∞–∑–¥–µ–ª 3, –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)
3. –°–≤–µ—Ä–∫–∞: –∫–ª—é—á –ø–∞—Ä—Ç–∏—Ü–∏–∏ (output_timestamp), –ø–µ—Ä–∏–æ–¥ (1 –¥–µ–Ω—å), –≥—Ä–∞–Ω–∏—Ü—ã (FROM ... TO ...)
4. –ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π –Ω–µ—Ç
5. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞

**–û—Ç–≤–µ—Ç:**
```markdown
‚úÖ –ü–†–û–í–ï–†–ö–ê –ü–û –°–ü–†–ê–í–û–ß–ù–ò–ö–£ v3.7 –ü–†–û–ô–î–ï–ù–ê

–°–≤–µ—Ä–µ–Ω–æ —Å KSK-Schema-Reference-v3.7.md:
- –¢–∞–±–ª–∏—Ü–∞ ksk_result (PARTITION BY RANGE (output_timestamp), –ø–µ—Ä–∏–æ–¥ 1 –¥–µ–Ω—å) ‚Äî —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ 100%
- –ü–∞—Ä—Ç–∏—Ü–∏—è ksk_result_2025_10_22 (FROM '2025-10-22 00:00:00' TO '2025-10-23 00:00:00') ‚Äî —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ 100%

–ò—Å—Ç–æ—á–Ω–∏–∫: KSK-Schema-Reference-v3.7.md, —Ä–∞–∑–¥–µ–ª 3

---

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–∞—Ä—Ç–∏—Ü–∏–∏ –∑–∞ 22 –æ–∫—Ç—è–±—Ä—è 2025 –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```sql
CREATE TABLE ksk_result_2025_10_22 PARTITION OF ksk_result
FOR VALUES FROM ('2025-10-22 00:00:00') TO ('2025-10-23 00:00:00');
```

**–ü–æ—è—Å–Ω–µ–Ω–∏–µ:**
- **–ü–µ—Ä–∏–æ–¥:** 1 –î–ï–ù–¨ (24 —á–∞—Å–∞)
- **FROM:** 2025-10-22 00:00:00.000 (**–≤–∫–ª—é—á–∞—è**)
- **TO:** 2025-10-23 00:00:00.000 (**–ù–ï –≤–∫–ª—é—á–∞—è** ‚Äî —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–∞—è –≥—Ä–∞–Ω–∏—Ü–∞!)
- **–î–∏–∞–ø–∞–∑–æ–Ω:** [FROM, TO) = [2025-10-22 00:00:00.000, 2025-10-23 00:00:00.000)
- **–í–∫–ª—é—á–∞–µ—Ç:** –í–°–ï timestamp —Å 2025-10-22 00:00:00.000 –¥–æ 2025-10-22 23:59:59.999
- **–ù–ï –≤–∫–ª—é—á–∞–µ—Ç:** 2025-10-23 00:00:00.000 –∏ –ø–æ–∑–∂–µ

---

‚úÖ –í–ê–õ–ò–î–ê–¶–ò–Ø –ü–†–û–ô–î–ï–ù–ê (5/5 —à–∞–≥–æ–≤)
–°–≤–µ—Ä–µ–Ω–æ: ksk_result (PARTITION BY RANGE (output_timestamp), –ø–µ—Ä–∏–æ–¥ 1 –¥–µ–Ω—å), –ø–∞—Ä—Ç–∏—Ü–∏—è ksk_result_2025_10_22 (FROM '2025-10-22 00:00:00' TO '2025-10-23 00:00:00')
–ò—Å—Ç–æ—á–Ω–∏–∫: KSK-Schema-Reference-v3.7.md, —Ä–∞–∑–¥–µ–ª 3
```

---

### –ü—Ä–∏–º–µ—Ä 2: –û—à–∏–±–∫–∞ –≤ –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏

**–í–æ–ø—Ä–æ—Å –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞:**
```
–°–æ–∑–¥–∞–π –ø–∞—Ä—Ç–∏—Ü–∏—é –¥–ª—è ksk_result –∑–∞ 22 –æ–∫—Ç—è–±—Ä—è 2025 —Å –≥—Ä–∞–Ω–∏—Ü–∞–º–∏ FROM ('2025-10-22 00:00:00') TO ('2025-10-22 23:59:59')
```

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è: —Ç–∞–±–ª–∏—Ü–∞ ksk_result, –ø–∞—Ä—Ç–∏—Ü–∏—è, –¥–∞—Ç–∞ 2025-10-22, –≥—Ä–∞–Ω–∏—Ü—ã FROM ... TO ...
2. –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ v3.7 (—Ä–∞–∑–¥–µ–ª 3, –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)
3. –°–≤–µ—Ä–∫–∞: –≥—Ä–∞–Ω–∏—Ü–∞ TO ('2025-10-22 23:59:59') vs —ç—Ç–∞–ª–æ–Ω ('2025-10-23 00:00:00')
4. **–ü–†–û–¢–ò–í–û–†–ï–ß–ò–ï:** –Ω–µ–≤–µ—Ä–Ω–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ TO
5. **–ë–õ–û–ö–ò–†–û–í–ö–ê** –¥–µ–π—Å—Ç–≤–∏—è

**–û—Ç–≤–µ—Ç:**
```markdown
‚ö†Ô∏è –ü–†–û–í–ï–†–ö–ê –ü–û –°–ü–†–ê–í–û–ß–ù–ò–ö–£ v3.7: –û–ë–ù–ê–†–£–ñ–ï–ù–´ –ü–†–û–¢–ò–í–û–†–ï–ß–ò–Ø

‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ü–†–û–¢–ò–í–û–†–ï–ß–ò–ï ‚Ññ1
–û–±—ä–µ–∫—Ç: –ü–∞—Ä—Ç–∏—Ü–∏—è ksk_result_2025_10_22 ‚Äî –≥—Ä–∞–Ω–∏—Ü–∞ TO
- –í –∑–∞–ø—Ä–æ—Å–µ: TO ('2025-10-22 23:59:59')
- –í —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ v3.7 (—Ä–∞–∑–¥–µ–ª 3, –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, "–ì—Ä–∞–Ω–∏—Ü—ã –ø–∞—Ä—Ç–∏—Ü–∏–∏"): TO ('2025-10-23 00:00:00')
- –¢–∏–ø –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è: –ù–µ–≤–µ—Ä–Ω–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ TO (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å 00:00:00, –ù–ï 23:59:59)
- –†–∏—Å–∫: **–ü–û–¢–ï–†–Ø –î–ê–ù–ù–´–•** —Å timestamp 2025-10-22 23:59:59.001 ... 2025-10-22 23:59:59.999 (999 –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥!)

**–ü–æ—è—Å–Ω–µ–Ω–∏–µ:**
- **TO ‚Äî –≠–ö–°–ö–õ–Æ–ó–ò–í–ù–ê–Ø –≥—Ä–∞–Ω–∏—Ü–∞!** –ü–∞—Ä—Ç–∏—Ü–∏—è –ù–ï –≤–∫–ª—é—á–∞–µ—Ç TO.
- **–î–∏–∞–ø–∞–∑–æ–Ω:** [FROM, TO) = [2025-10-22 00:00:00.000, 2025-10-23 00:00:00.000)
- **–ï—Å–ª–∏ TO = '2025-10-22 23:59:59':**
  - ‚úÖ –í–∫–ª—é—á–∞–µ—Ç: 2025-10-22 00:00:00.000 ... 2025-10-22 23:59:58.999
  - ‚ùå –ù–ï –≤–∫–ª—é—á–∞–µ—Ç: 2025-10-22 23:59:59.000 ... 2025-10-22 23:59:59.999 (**–ü–û–¢–ï–†–Ø –î–ê–ù–ù–´–•!**)
- **–ü—Ä–∞–≤–∏–ª—å–Ω–æ TO = '2025-10-23 00:00:00':**
  - ‚úÖ –í–∫–ª—é—á–∞–µ—Ç: 2025-10-22 00:00:00.000 ... 2025-10-22 23:59:59.999

---

‚õî –î–ï–ô–°–¢–í–ò–ï –ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù–û

–ö–æ–¥ –ù–ï –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω –¥–æ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π.

üîç –¢–†–ï–ë–£–ï–¢–°–Ø –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–ï:

–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ, —á—Ç–æ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –≥—Ä–∞–Ω–∏—Ü—É TO = '2025-10-23 00:00:00' (—Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å!) —Å–æ–≥–ª–∞—Å–Ω–æ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫—É v3.7.

---

‚ö†Ô∏è –í–ê–õ–ò–î–ê–¶–ò–Ø: –û–ë–ù–ê–†–£–ñ–ï–ù–´ –ü–†–û–¢–ò–í–û–†–ï–ß–ò–Ø (—Å–º. –æ—Ç—á—ë—Ç –≤—ã—à–µ)
```

---

## üìã –¢–ê–ë–õ–ò–¶–ê –ò–ó–ú–ï–ù–ï–ù–ò–ô: v2.1 ‚Üí v2.2

| ‚Ññ | –ê—Å–ø–µ–∫—Ç | v2.1 (–±—ã–ª–æ) | v2.2 (—Å—Ç–∞–ª–æ) | –ü—Ä–∏—á–∏–Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è |
|---|--------|-------------|--------------|-------------------|
| **1** | **–í–µ—Ä—Å–∏—è —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞** | KSK-Schema-Reference-v3.6.md | **KSK-Schema-Reference-v3.7.md** | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ (–¥–æ–±–∞–≤–ª–µ–Ω –ø–µ—Ä–∏–æ–¥ –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è) |
| **2** | **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–≤–µ—Ä–æ–∫** | 16 –ø—Ä–æ–≤–µ—Ä–æ–∫ | **17 –ø—Ä–æ–≤–µ—Ä–æ–∫** (+1 –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è) | –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–µ—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è |
| **3** | **–ü—Ä–∞–≤–∏–ª–æ ‚Ññ10** | "–ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ TIMESTAMP" | "–ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ TIMESTAMP" (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) | ‚Äî |
| **4** | **–ü—Ä–∞–≤–∏–ª–æ ‚Ññ11** | –ù–ï –°–£–©–ï–°–¢–í–û–í–ê–õ–û | **"–ü–µ—Ä–∏–æ–¥ –ø–∞—Ä—Ç–∏—Ü–∏–∏ ‚Äî 1 –î–ï–ù–¨, –≥—Ä–∞–Ω–∏—Ü—ã FROM ... TO ..."** | –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–µ—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–∏–æ–¥–∞ –∏ –≥—Ä–∞–Ω–∏—Ü –ø–∞—Ä—Ç–∏—Ü–∏–π |
| **5** | **–®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ ‚Ññ17** | –ù–ï –°–£–©–ï–°–¢–í–û–í–ê–õ–û | **–î–µ—Ç–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è** | –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ —Å 8 –∞—Å–ø–µ–∫—Ç–∞–º–∏ –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è |
| **6** | **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –ø—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞—Ö** | –ú–∏–≥—Ä–∞—Ü–∏—è = HIGHEST | **–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ = HIGHEST (–º–∏–≥—Ä–∞—Ü–∏—è = MEDIUM)** | –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ ‚Äî –ï–î–ò–ù–´–ô –ò–°–¢–û–ß–ù–ò–ö –ò–°–¢–ò–ù–´ |
| **7** | **–°—Ç–∞—Ç—É—Å —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞** | "–ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ" | **"–≠–¢–ê–õ–û–ù ‚Äî –ï–î–ò–ù–´–ô –ò–°–¢–û–ß–ù–ò–ö –ò–°–¢–ò–ù–´"** | –£—Å–∏–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ |
| **8** | **–ü—Ä–∏–º–µ—Ä 1** | –í–æ–ø—Ä–æ—Å –æ ksk_run_report | **–í–æ–ø—Ä–æ—Å –æ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–∞—Ä—Ç–∏—Ü–∏–∏** | –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è |
| **9** | **–ü—Ä–∏–º–µ—Ä 2** | –ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–µ payment_type='W' | **–ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–µ –≥—Ä–∞–Ω–∏—Ü–∞ TO ('23:59:59' vs '00:00:00')** | –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –æ—à–∏–±–∫–∏ –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è |
| **10** | **–§–æ—Ä–º–∞—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏** | –£–ø–æ–º–∏–Ω–∞–Ω–∏–µ –ø–∞—Ä—Ç–∏—Ü–∏–∏ –ë–ï–ó –¥–µ—Ç–∞–ª–µ–π | **–£–ø–æ–º–∏–Ω–∞–Ω–∏–µ –ø–∞—Ä—Ç–∏—Ü–∏–∏ –° –¥–µ—Ç–∞–ª—è–º–∏ (FROM ... TO ...)** | –ê–∫—Ü–µ–Ω—Ç –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–∞—Ö –ø–∞—Ä—Ç–∏—Ü–∏–π |

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ò–ó–ú–ï–ù–ï–ù–ò–ô v2.1 ‚Üí v2.2

| –ú–µ—Ç—Ä–∏–∫–∞ | v2.1 | v2.2 | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|---------|------|------|-----------|
| **–í–µ—Ä—Å–∏—è —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞** | v3.6 | **v3.7** | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ |
| **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–≤–µ—Ä–æ–∫** | 16 | **17** | +1 (–ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ) |
| **–ü—Ä–∞–≤–∏–ª–∞ (TOP –û–®–ò–ë–û–ö)** | 10 | **11** | +1 (–ø–µ—Ä–∏–æ–¥ –ø–∞—Ä—Ç–∏—Ü–∏–∏) |
| **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞** | HIGH | **HIGHEST** | –£—Å–∏–ª–µ–Ω–∏–µ |
| **–ü—Ä–∏–º–µ—Ä—ã —Å –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º** | 0 | **2** | –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è |
| **–£–ø–æ–º–∏–Ω–∞–Ω–∏–π "FROM TO –≥—Ä–∞–Ω–∏—Ü—ã"** | 2 | **12** | –ê–∫—Ü–µ–Ω—Ç –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–∞—Ö |
| **–£–ø–æ–º–∏–Ω–∞–Ω–∏–π "1 –¥–µ–Ω—å –ø–µ—Ä–∏–æ–¥"** | 0 | **8** | –ê–∫—Ü–µ–Ω—Ç –Ω–∞ –ø–µ—Ä–∏–æ–¥–µ |
| **–£–ø–æ–º–∏–Ω–∞–Ω–∏–π "—ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–∞—è TO"** | 0 | **6** | –ê–∫—Ü–µ–Ω—Ç –Ω–∞ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ—Å—Ç–∏ |

---

## üéØ –ö–õ–Æ–ß–ï–í–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø v2.2

1. **‚úÖ –î–û–ë–ê–í–õ–ï–ù–û –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–∏–æ–¥–∞ –ø–∞—Ä—Ç–∏—Ü–∏–∏ (1 –¥–µ–Ω—å), –≥—Ä–∞–Ω–∏—Ü (FROM ... TO ...), —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ—Å—Ç–∏ TO
2. **‚úÖ –ü–†–ò–û–†–ò–¢–ï–¢ –°–ü–†–ê–í–û–ß–ù–ò–ö–ê:** KSK-Schema-Reference-v3.7.md –∏–º–µ–µ—Ç **–í–´–°–®–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢** –∫–∞–∫ **–ï–î–ò–ù–´–ô –ò–°–¢–û–ß–ù–ò–ö –ò–°–¢–ò–ù–´**
3. **‚úÖ –î–ï–¢–ê–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê –ü–ê–†–¢–ò–¶–ò–û–ù–ò–†–û–í–ê–ù–ò–Ø:** –¢–∞–±–ª–∏—Ü–∞ —Å 8 –∞—Å–ø–µ–∫—Ç–∞–º–∏ (–∫–ª—é—á, –ø–µ—Ä–∏–æ–¥, FROM, TO, —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ—Å—Ç—å, –¥–∏–∞–ø–∞–∑–æ–Ω)
4. **‚úÖ –ê–ö–¢–£–ê–õ–ò–ó–ê–¶–ò–Ø:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ v3.7
5. **‚úÖ –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø:** 2 –ø—Ä–∏–º–µ—Ä–∞ —Å –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏ –æ—à–∏–±–æ—á–Ω—ã–π)
6. **‚úÖ –£–°–ò–õ–ï–ù–ò–ï –°–¢–ê–¢–£–°–ê:** –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ ‚Äî –≠–¢–ê–õ–û–ù –¥–ª—è –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞

---

**VALIDATION_PROMPT_KSK_V2.2 ‚Äî –ì–û–¢–û–í –ö –ü–†–ò–ú–ï–ù–ï–ù–ò–Æ! ‚úÖ**

**–ö–æ–Ω–µ—Ü –¥–æ–∫—É–º–µ–Ω—Ç–∞ ‚Äî –ü–û–õ–ù–û–ï –†–£–ö–û–í–û–î–°–¢–í–û –ü–û –í–ê–õ–ò–î–ê–¶–ò–ò –°–ò–°–¢–ï–ú–´ –ö–°–ö v2.2 ‚úÖ**