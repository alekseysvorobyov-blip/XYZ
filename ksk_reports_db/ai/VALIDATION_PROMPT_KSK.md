# –ü–†–û–ú–ü–¢ –î–õ–Ø –ü–†–û–°–¢–†–ê–ù–°–¢–í–ê –ö–°–ö: –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ Schema Reference

## üéØ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û–ï –ü–†–ê–í–ò–õ–û

–ü–µ—Ä–µ–¥ –ª—é–±—ã–º –æ—Ç–≤–µ—Ç–æ–º, –∫–∞—Å–∞—é—â–∏–º—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î, SQL-–∫–æ–¥–∞, —Ñ—É–Ω–∫—Ü–∏–π –∏–ª–∏ –º–∏–≥—Ä–∞—Ü–∏–π, —Ç—ã **–û–ë–Ø–ó–ê–ù**:

1. **–ó–ê–ì–†–£–ó–ò–¢–¨** –∏ **–ü–†–û–í–ï–†–ò–¢–¨** —Ñ–∞–π–ª **KSK-Schema-Reference-v2.md** –∏–∑ —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
2. **–°–í–ï–†–ò–¢–¨** –≤—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –ë–î —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è–º–∏ –∏–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞
3. **–í–´–Ø–í–ò–¢–¨** –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å
4. **–ü–†–ï–î–£–ü–†–ï–î–ò–¢–¨** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è—Ö –î–û –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞

---

## üìã –ê–õ–ì–û–†–ò–¢–ú –ü–†–û–í–ï–†–ö–ò

### –®–ê–ì 1: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –æ–±—ä–µ–∫—Ç–æ–≤
–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–∞ –æ –ë–î, –æ–ø—Ä–µ–¥–µ–ª–∏ –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã:
- –¢–∞–±–ª–∏—Ü—ã (ksk_result, ksk_figurant, ksk_report_* –∏ —Ç.–¥.)
- –ü–æ–ª—è (payment_type, resolution, has_bypass, is_bypass –∏ —Ç.–¥.)
- –ü–µ—Ä–µ—á–∏—Å–ª—è–µ–º—ã–µ —Ç–∏–ø—ã (I/O/T/M/V, allow/review/deny/empty –∏ —Ç.–¥.)
- –§—É–Ω–∫—Ü–∏–∏ (ksk_*, put_ksk_result, check_* –∏ —Ç.–¥.)
- –ó–∞–¥–∞—á–∏ pg_cron

### –®–ê–ì 2: –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞
```
search_files_v2:
  queries: ["payment_type I O T M V", "has_bypass is_bypass", "ksk_report_"]
  file_ids: ["UUID —Ñ–∞–π–ª–∞ KSK-Schema-Reference-v2.md"]
```

### –®–ê–ì 3: –°–≤–µ—Ä–∫–∞ —Å —ç—Ç–∞–ª–æ–Ω–æ–º
–î–ª—è –ö–ê–ñ–î–û–ì–û –æ–±—ä–µ–∫—Ç–∞ –ø—Ä–æ–≤–µ—Ä—å:
- ‚úÖ –ò–º—è —Å–æ–≤–ø–∞–¥–∞–µ—Ç (—Ç–æ—á–Ω–æ, –≤–∫–ª—é—á–∞—è —Ä–µ–≥–∏—Å—Ç—Ä)
- ‚úÖ –¢–∏–ø –ø–æ–ª—è —Å–æ–≤–ø–∞–¥–∞–µ—Ç (VARCHAR(20) vs VARCHAR(10) –∏ —Ç.–¥.)
- ‚úÖ –ó–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–π —Å–æ–≤–ø–∞–¥–∞—é—Ç (I/O/T/M/V, –∞ –Ω–µ I/O/T/M/W)
- ‚úÖ –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç ("–¢—Ä–∞–Ω–∑–∏—Ç–Ω—ã–π", –∞ –Ω–µ "—Ç—Ä–∞–Ω–∑–∏—Ç")
- ‚úÖ Default –∑–Ω–∞—á–µ–Ω–∏—è —Å–æ–≤–ø–∞–¥–∞—é—Ç ('empty' vs 'no')
- ‚úÖ –°–∏–≥–Ω–∞—Ç—É—Ä—ã —Ñ—É–Ω–∫—Ü–∏–π —Å–æ–≤–ø–∞–¥–∞—é—Ç (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã, —Ç–∏–ø—ã –≤–æ–∑–≤—Ä–∞—Ç–∞)

### –®–ê–ì 4: –í—ã—è–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π
–ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–æ –ù–ï —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ, —Å–æ–∑–¥–∞–π —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç—á—ë—Ç:

```markdown
‚ö†Ô∏è –û–ë–ù–ê–†–£–ñ–ï–ù–´ –ü–†–û–¢–ò–í–û–†–ï–ß–ò–Ø –°–û –°–ü–†–ê–í–û–ß–ù–ò–ö–û–ú

1. –û–±—ä–µ–∫—Ç: ksk_result.payment_type
   - –í –∑–∞–ø—Ä–æ—Å–µ: VARCHAR(30) 
   - –í —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ v2.0 (—Ä–∞–∑–¥–µ–ª 1.1): VARCHAR(20)
   - ‚ùå –ü–†–û–¢–ò–í–û–†–ï–ß–ò–ï: –Ω–µ–≤–µ—Ä–Ω—ã–π —Ç–∏–ø –ø–æ–ª—è

2. –û–±—ä–µ–∫—Ç: payment_type –∑–Ω–∞—á–µ–Ω–∏–µ "W"
   - –í –∑–∞–ø—Ä–æ—Å–µ: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ "W"
   - –í —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ v2.0 (—Ä–∞–∑–¥–µ–ª 1.1): –¥–æ–ø—É—Å—Ç–∏–º—ã —Ç–æ–ª—å–∫–æ I, O, T, M, V
   - ‚ùå –ü–†–û–¢–ò–í–û–†–ï–ß–ò–ï: –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

3. –§—É–Ω–∫—Ü–∏—è: ksk_run_report()
   - –í –∑–∞–ø—Ä–æ—Å–µ: 5 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
   - –í —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ v2.0 (—Ä–∞–∑–¥–µ–ª 3.7): 6 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
   - ‚ùå –ü–†–û–¢–ò–í–û–†–ï–ß–ò–ï: –Ω–µ–≤–µ—Ä–Ω–∞—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞
```

### –®–ê–ì 5: –î–µ–π—Å—Ç–≤–∏–µ
- **–ï–°–õ–ò –ü–†–û–¢–ò–í–û–†–ï–ß–ò–ô –ù–ï–¢** ‚Üí –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–π –∫–æ–¥/–æ—Ç–≤–µ—Ç
- **–ï–°–õ–ò –ü–†–û–¢–ò–í–û–†–ï–ß–ò–Ø –ï–°–¢–¨** ‚Üí –°–ù–ê–ß–ê–õ–ê –ø–æ–∫–∞–∂–∏ –æ—Ç—á—ë—Ç, –ü–û–¢–û–ú –ø—Ä–µ–¥–ª–æ–∂–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç

---

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–í–ï–†–ö–ò

### has_bypass vs is_bypass (—á–∞—Å—Ç–æ –ø—É—Ç–∞—é—Ç!)
```
‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:
- has_bypass –≤ ksk_result, DEFAULT 'empty', –∑–Ω–∞—á–µ–Ω–∏—è: yes/no/empty
  –°–º—ã—Å–ª: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ò–ú–ï–ï–¢ —Ñ–∏–≥—É—Ä–∞–Ω—Ç–æ–≤ —Å –∏—Å–∫–ª—é—á–µ–Ω–∏—è–º–∏
  
- is_bypass –≤ ksk_figurant, DEFAULT 'no', –∑–Ω–∞—á–µ–Ω–∏—è: yes/no
  –°–º—ã—Å–ª: —Ñ–∏–≥—É—Ä–∞–Ω—Ç –ò–°–ö–õ–Æ–ß–Å–ù –∏–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏

‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:
- –ü—É—Ç–∞—Ç—å has_bypass –∏ is_bypass
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –∫–∞–∫ —Å–∏–Ω–æ–Ω–∏–º—ã
- –ü—Ä–∏—Å–≤–∞–∏–≤–∞—Ç—å –∏–º –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
```

### payment_type (—Å—Ç—Ä–æ–≥–æ 5 –∑–Ω–∞—á–µ–Ω–∏–π!)
```
‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:
I = –í—Ö–æ–¥—è—â–∏–π
O = –ò—Å—Ö–æ–¥—è—â–∏–π
T = –¢—Ä–∞–Ω–∑–∏—Ç–Ω—ã–π (–ù–ï "—Ç—Ä–∞–Ω–∑–∏—Ç"!)
M = –ú–µ–∂—Ñ–∏–ª–∏–∞–ª—å–Ω—ã–π
V = –í–Ω—É—Ç—Ä–∏—Ñ–∏–ª–∏–∞–ª—å–Ω—ã–π

‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:
- –õ—é–±—ã–µ –¥—Ä—É–≥–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è (W, X, Y, Z)
- –ù–µ—Ç–æ—á–Ω—ã–µ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ ("—Ç—Ä–∞–Ω–∑–∏—Ç" –≤–º–µ—Å—Ç–æ "–¢—Ä–∞–Ω–∑–∏—Ç–Ω—ã–π")
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞ (i, o, t, m, v)
```

### resolution (—Å—Ç—Ä–æ–≥–æ 4 –∑–Ω–∞—á–µ–Ω–∏—è!)
```
‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:
allow = –†–∞–∑—Ä–µ—à–µ–Ω–æ
review = –ù–∞ –ø—Ä–æ–≤–µ—Ä–∫—É
deny = –ó–∞–ø—Ä–µ—â–µ–Ω–æ
empty = –ë–µ–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å "approved" –≤–º–µ—Å—Ç–æ "allow"
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å "rejected" –≤–º–µ—Å—Ç–æ "deny"
- –î–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –±–µ–∑ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è
```

---

## üìù –§–û–†–ú–ê–¢ –û–¢–í–ï–¢–ê

### –ï—Å–ª–∏ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π –ù–ï–¢:
```markdown
‚úÖ –ü–†–û–í–ï–†–ö–ê –ü–û –°–ü–†–ê–í–û–ß–ù–ò–ö–£ v2.0: –ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ

[–¢–≤–æ–π –æ–±—ã—á–Ω—ã–π –æ—Ç–≤–µ—Ç —Å –∫–æ–¥–æ–º/–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º]
```

### –ï—Å–ª–∏ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è –ï–°–¢–¨:
```markdown
‚ö†Ô∏è –ü–†–û–í–ï–†–ö–ê –ü–û –°–ü–†–ê–í–û–ß–ù–ò–ö–£ v2.0: –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è

[–î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç –ø–æ –∫–∞–∂–¥–æ–º—É –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—é]

---

‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –í–ï–†–°–ò–Ø:

[–ö–æ–¥ —Å —É—á—ë—Ç–æ–º —ç—Ç–∞–ª–æ–Ω–Ω—ã—Ö –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π –∏–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞]

–ò—Å—Ç–æ—á–Ω–∏–∫: KSK-Schema-Reference-v2.md, —Ä–∞–∑–¥–µ–ª—ã [—É–∫–∞–∑–∞—Ç—å —Ä–∞–∑–¥–µ–ª—ã]
```

---

## üîÑ –ö–û–ì–î–ê –û–ë–ù–û–í–õ–Ø–¢–¨ –°–ü–†–ê–í–û–ß–ù–ò–ö

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ —Ç—ã –¥–æ–ª–∂–µ–Ω:
1. –û–±–Ω–æ–≤–∏—Ç—å KSK-Schema-Reference
2. –£–≤–µ–ª–∏—á–∏—Ç—å –≤–µ—Ä—Å–∏—é (v2.0 ‚Üí v2.1 ‚Üí v3.0)
3. –î–æ–±–∞–≤–∏—Ç—å –≤ —Ä–∞–∑–¥–µ–ª "–ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è" –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
4. –£–≤–µ–¥–æ–º–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏

---

## ‚öñÔ∏è –ü–†–ò–û–†–ò–¢–ï–¢–´ –ü–†–ò –ö–û–ù–§–õ–ò–ö–¢–ê–•

1. **HIGHEST:** –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–∑ KSK-Schema-Reference-v2.md
2. **HIGH:** –Ø–≤–Ω—ã–µ —É–∫–∞–∑–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
3. **MEDIUM:** –î–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–∞–π–ª–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ ksk_full_migration-*.txt
4. **LOW:** –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã (context_AI.md, README –∏ —Ç.–¥.)
5. **LOWEST:** –¢–≤–æ–∏ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ù–ò–ö–û–ì–î–ê!)

---

## üíæ –†–ê–°–ü–û–õ–û–ñ–ï–ù–ò–ï –°–ü–†–ê–í–û–ß–ù–ò–ö–ê

**–ò–º—è —Ñ–∞–π–ª–∞:** `KSK-Schema-Reference-v2.md`  
**–ü—É—Ç—å:** –§–∞–π–ª—ã –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –ö–°–ö  
**UUID:** (–±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏)

---

## ‚úã –ò–°–ö–õ–Æ–ß–ï–ù–ò–Ø

–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ù–ï –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è:
- –í–æ–ø—Ä–æ—Å–æ–≤, –Ω–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –ë–î (–æ–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã, –æ–±—Å—É–∂–¥–µ–Ω–∏—è)
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏–π (–Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—â–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î)
- –ü—Ä–∏–º–µ—Ä–æ–≤ –¥–∞–Ω–Ω—ã—Ö (JSON –≤ input.json, output.json)

---

**–í–ê–ñ–ù–û:** –≠—Ç–æ –ù–ï —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è, –∞ **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û–ï –ü–†–ê–í–ò–õ–û** –¥–ª—è –≤—Å–µ—Ö –æ—Ç–≤–µ—Ç–æ–≤, –∫–∞—Å–∞—é—â–∏—Ö—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î —Å–∏—Å—Ç–µ–º—ã –ö–°–ö.
