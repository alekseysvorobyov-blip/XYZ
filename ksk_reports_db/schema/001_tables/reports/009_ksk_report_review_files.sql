-- ============================================================================
-- ТАБЛИЦА: ksk_report_review_files (DEPRECATED - УДАЛЕНИЕ)
-- ============================================================================
-- ОПИСАНИЕ:
--   Таблица устарела. Файлы отчётов Review теперь хранятся в общей таблице
--   ksk_report_files для унификации архитектуры.
--
-- ДЕЙСТВИЕ:
--   Скрипт удаляет таблицу ksk_report_review_files если она существует
--
-- ИСТОРИЯ ИЗМЕНЕНИЙ:
--   2025-12-08 - Создание таблицы
--   2025-12-16 - DEPRECATED: Миграция на ksk_report_files, удаление таблицы
-- ============================================================================

BEGIN;

-- ============================================================================
-- УДАЛЕНИЕ ТАБЛИЦЫ ksk_report_review_files
-- ============================================================================

DO $$
BEGIN
  IF EXISTS (
    SELECT 1 FROM information_schema.tables
    WHERE table_schema = 'upoa_ksk_reports'
    AND table_name = 'ksk_report_review_files'
  ) THEN
    -- Удаляем таблицу (данные не переносятся - они были временными)
    DROP TABLE upoa_ksk_reports.ksk_report_review_files;
    RAISE NOTICE '[ksk_report_review_files] ✅ Таблица удалена (deprecated, данные в ksk_report_files)';
  ELSE
    RAISE NOTICE '[ksk_report_review_files] ℹ️  Таблица уже удалена';
  END IF;
END $$;

COMMIT;

-- ============================================================================
-- КОНЕЦ СКРИПТА
-- ============================================================================
