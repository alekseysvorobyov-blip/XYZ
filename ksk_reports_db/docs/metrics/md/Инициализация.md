Сейчас будет компот. Давай сделаем из него что-то стоящее. Дашборды графана. 2 шутки. Они должны быть а) динамичными. реагировать на текущую ситуацию и как она меняется в динамике. б) информативными. глядя на них мы должны сразу сказать все хорошо или не все хорошо и потенциальные проблемы. Что есть. 1. Вот индекс. Это ОТЧЕТНАЯ БД не обработка. Отчетная база. Точка входа put_ksk_result. сбор отчетов через run_report (примерно) 2. Приложение на JAVA Spring которое вызывает функцию put_ksk_result. Данные берет из топика кафки. Цепочка такая топик_с_данными> --->топик__результата --->топик__отчета-->JAVA-->put_ksk_result Публикует метрики такие (грубо, но потом разберемся детальнее на практике) ksk.report.kafka.messages.rate ksk добавить report? ksk.db.put_result.query_errors_rate - ошибки с БД ksk.db.put_result.failed_records_rate - транзакции которые ушли в ошибку. | Метрика | Описание | Нормальное значение | Критическое значение | | ------------------------------------- | --------------------------------------------------- | ------------------- | -------------------- | | ksk.kafka.messages.rate | Сообщений/сек обработано | 30-50 /сек | < 10 /сек | | ksk.db.put_result.duration_p95 | p95 времени put_ksk_result() | < 100 мс | > 200 мс | | ksk.db.put_result.query_errors_rate | Доля неуспешных запросов к БД (исключения SQL) | 0 | > 1% | | ksk.db.put_result.failed_records_rate | Доля записей, не вставленных из-за ошибок валидации | 0 | > 1% | 3. Есть +- готовый борд. См. скриншот... блин как тебе картинку показать?